# é€šçŸ¥é…ç½®

notification:
  # å¯ç”¨é€šçŸ¥
  enabled: true

  # é€šçŸ¥æ¸ é“ï¼ˆå¯å¤šé€‰: telegram, slack, consoleï¼‰
  channels:
    - console  # æ§åˆ¶å°ï¼ˆæµ‹è¯•ç”¨ï¼‰
    # - telegram  # Telegram
    # - slack     # Slack

  # Telegram é…ç½®
  telegram:
    bot_token: ""  # Telegram Bot Token
    chat_id: ""    # Chat ID

  # Slack é…ç½®
  slack:
    webhook_url: ""  # Slack Webhook URL

  # é€šçŸ¥ç±»å‹
  types:
    # å¥—åˆ©æœºä¼šé€šçŸ¥
    opportunity:
      enabled: true
      min_premium_rate: 0.015  # æœ€å°æº¢ä»·ç‡ï¼ˆè¶…è¿‡æ‰é€šçŸ¥ï¼‰
      min_discount_rate: 0.01   # æœ€å°æŠ˜ä»·ç‡
      notify_on_premium: true   # æº¢ä»·å¥—åˆ©æœºä¼š
      notify_on_discount: true   # æŠ˜ä»·å¥—åˆ©æœºä¼š
      include_fund_details: true  # åŒ…å«åŸºé‡‘è¯¦æƒ…
      max_notifications_per_hour: 10  # æ¯å°æ—¶æœ€å¤šé€šçŸ¥æ¬¡æ•°

    # äº¤æ˜“é€šçŸ¥
    trade:
      enabled: true
      notify_on_buy: true
      notify_on_sell: true
      notify_on_subscribe: true
      notify_on_redeem: true
      include_price_change: true  # åŒ…å«ä»·æ ¼å˜åŠ¨
      include_amount: true         # åŒ…å«é‡‘é¢

    # é”™è¯¯é€šçŸ¥
    error:
      enabled: true
      notify_on_connection_error: true
      notify_on_trade_error: true
      notify_on_data_error: true
      include_error_trace: true       # åŒ…å«é”™è¯¯å †æ ˆ
      max_error_notifications_per_hour: 20  # æ¯å°æ—¶æœ€å¤šé”™è¯¯é€šçŸ¥æ¬¡æ•°

    # ç³»ç»ŸçŠ¶æ€é€šçŸ¥
    system:
      enabled: true
      notify_on_startup: true        # å¯åŠ¨é€šçŸ¥
      notify_on_shutdown: true       # å…³é—­é€šçŸ¥
      notify_on_scan_complete: true  # æ‰«æå®Œæˆé€šçŸ¥
      notify_on_position_change: true # æŒä»“å˜åŠ¨é€šçŸ¥
      notify_interval_minutes: 30     # ç³»ç»ŸçŠ¶æ€é€šçŸ¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰

  # é€šçŸ¥é¢‘ç‡é™åˆ¶ï¼ˆé¿å…åˆ·å±ï¼‰
  rate_limit:
    enabled: true
    max_notifications_per_minute: 5  # æ¯åˆ†é’Ÿæœ€å¤š 5 æ¡é€šçŸ¥
    min_interval_seconds: 30        # åŒä¸€ç±»å‹é€šçŸ¥æœ€å°é—´éš” 30 ç§’
    rate_limit_on_success: true      # æˆåŠŸé€šçŸ¥ä¹Ÿå—é™åˆ¶
    rate_limit_on_error: false       # é”™è¯¯é€šçŸ¥ä¸å—é™åˆ¶ï¼ˆé‡è¦é”™è¯¯ï¼‰

  # é€šçŸ¥æ—¶é—´çª—å£ï¼ˆåªåœ¨ç‰¹å®šæ—¶é—´æ®µå‘é€é€šçŸ¥ï¼‰
  time_window:
    enabled: false  # é»˜è®¤ç¦ç”¨
    start_hour: 9   # å¼€å§‹æ—¶é—´ï¼ˆ9:00ï¼‰
    end_hour: 21    # ç»“æŸæ—¶é—´ï¼ˆ21:00ï¼‰
    timezone: "Asia/Shanghai"  # æ—¶åŒº

  # é€šçŸ¥ä¼˜å…ˆçº§ï¼ˆé‡è¦é€šçŸ¥ä¼šç«‹å³å‘é€ï¼‰
  priority:
    enabled: true
    bypass_rate_limit_for_errors: true  # é”™è¯¯é€šçŸ¥ä¸å—é¢‘ç‡é™åˆ¶
    bypass_rate_limit_for_trades: true  # äº¤æ˜“é€šçŸ¥ä¸å—é¢‘ç‡é™åˆ¶

  # é€šçŸ¥æ¨¡æ¿ï¼ˆè‡ªå®šä¹‰é€šçŸ¥æ ¼å¼ï¼‰
  templates:
    # å¥—åˆ©æœºä¼šæ¨¡æ¿
    opportunity_premium: "ğŸš€ LOF å¥—åˆ©æœºä¼š\n\n{fund_name}({fund_code})\næº¢ä»·ç‡: {premium_rate:.2f}%\nåœºå†…: {price:.3f} / å‡€å€¼: {nav:.3f}"
    opportunity_discount: "ğŸ“‰ LOF æŠ˜ä»·æœºä¼š\n\n{fund_name}({fund_code})\næŠ˜ä»·ç‡: {discount_rate:.2f}%\nåœºå†…: {price:.3f} / å‡€å€¼: {nav:.3f}"

    # äº¤æ˜“æ¨¡æ¿
    trade_buy: "ğŸŸ¢ ä¹°å…¥\n{fund_name}({fund_code})\n{quantity}æ‰‹ @ {price:.3f}\né‡‘é¢: {amount:.2f}"
    trade_sell: "ğŸ”´ å–å‡º\n{fund_name}({fund_code})\n{quantity}æ‰‹ @ {price:.3f}\né‡‘é¢: {amount:.2f}"
    trade_subscribe: "ğŸ“‹ ç”³è´­\n{fund_name}({fund_code})\n{quantity}è‚¡ @ 100.00"

    # é”™è¯¯æ¨¡æ¿
    error_connection: "âŒ è¿æ¥å¤±è´¥\næ— æ³•è¿æ¥åˆ°åˆ¸å•† API"
    error_trade: "âŒ äº¤æ˜“å¤±è´¥\nè®¢å•æ‰§è¡Œå¤±è´¥"
    error_data: "âš ï¸ æ•°æ®é”™è¯¯\nè·å–åŸºé‡‘æ•°æ®å¤±è´¥"
